name: üåç Full Daily Cycle

on:
  schedule:
    - cron: '0 3 * * *'    # 3am UTC: idea engine
    - cron: '30 4 * * *'   # 4:30am: knowledge harvest v2
    - cron: '0 5 * * *'    # 5am: world intelligence + all APIs
    - cron: '0 6 * * *'    # 6am: content + visual + language + brain
    - cron: '0 7 * * *'    # 7am: privacy scrub
  workflow_dispatch:

jobs:
  idea-cycle:
    name: üß† Idea Engine
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      - run: python mycelium/idea_engine.py
        continue-on-error: true
      - run: python mycelium/idea_builder.py
        continue-on-error: true
      - run: |
          git config user.name "meeko-brain"
          git config user.email "brain@meeko-nerve-center"
          git add data/ knowledge/ mycelium/IDEAS.md WIRED.md
          git diff --cached --quiet || git commit -m "ideas: engine cycle [$(date -u +%Y-%m-%d)]" && git push

  world-intelligence:
    name: üåé World Intelligence
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      - run: python mycelium/knowledge_harvester_v2.py
        continue-on-error: true
      - run: python mycelium/world_intelligence.py
        continue-on-error: true
      - run: python mycelium/congress_watcher.py
        continue-on-error: true
      - run: |
          git config user.name "meeko-intelligence"
          git config user.email "intel@meeko-nerve-center"
          git add data/ knowledge/
          git diff --cached --quiet || git commit -m "data: world intelligence [$(date -u +%Y-%m-%d)]" && git push

  content-cycle:
    name: üé® Content + Visuals + Language + AI
    runs-on: ubuntu-latest
    needs: world-intelligence
    permissions:
      contents: write
    env:
      HF_TOKEN: ${{ secrets.HF_TOKEN }}
    steps:
      - uses: actions/checkout@v4
      - run: python mycelium/crypto_jobs.py
        continue-on-error: true
      - run: python mycelium/art_cause_generator.py
        continue-on-error: true
      - run: python mycelium/open_library_reader.py
        continue-on-error: true
      - run: python mycelium/music_intelligence.py
        continue-on-error: true
      - run: python mycelium/visual_content.py
        continue-on-error: true
      - run: python mycelium/language_engine.py
        continue-on-error: true
      - run: python mycelium/hf_brain.py
        continue-on-error: true
      - run: python mycelium/qr_propagator.py
        continue-on-error: true
      - run: |
          git config user.name "meeko-content"
          git config user.email "content@meeko-nerve-center"
          git add data/ knowledge/ content/ public/
          git diff --cached --quiet || git commit -m "content: daily cycle [$(date -u +%Y-%m-%d)]" && git push

  privacy-scrub:
    name: üîí Privacy Scrub
    runs-on: ubuntu-latest
    needs: content-cycle
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      - run: python mycelium/privacy_scrubber.py
      - run: |
          git config user.name "meeko-scrubber"
          git config user.email "privacy@meeko-nerve-center"
          git add data/scrub_log.json PRIVACY.md
          git diff --cached --quiet || git commit -m "privacy: daily scrub [$(date -u +%Y-%m-%d)]" && git push
